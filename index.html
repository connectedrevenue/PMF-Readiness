<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PMF Readiness Scorecard</title>
  <!-- Import DM Sans and Poppins fonts from Google Fonts to mirror the Connected Revenue site -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;600;700&family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    /* Basic reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'DM Sans', 'Inter', sans-serif;
    }
    body {
      /* Changed background color to white */
      background: #ffffff;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 15px 20px;
      min-height: 100vh;
    }
    .scorecard {
      background: #fff;
      border-radius: 0px;
      box-shadow: 0 0px 0px rgba(0,0,0,0.1);
      max-width: 700px;
      width: 100%;
      padding: 0px 0px;
      animation: fadeIn 0.6s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    h1 {
      margin-bottom: 10px;
      font-size: 2rem;
      line-height: 1.3;
      font-weight: 700;
      color: #1F1235;
    }
    p.intro {
      margin-bottom: 25px;
      color: #555;
    }
    .question {
      margin-bottom: 30px;
    }

    /* Welcome page styling */
    .welcome-page {
      text-align: center;
    }
    .welcome-page h1 {
      font-size: 2rem;
      margin-bottom: 0.75rem;
      font-weight: 700;
      color: #1F1235;
    }
    .assessment-title {
      text-align: center;
      color: #5D1E96;
      font-family: 'DM Sans', sans-serif;
      font-size: 1.375em;
      line-height: 1.125;
      font-weight: 700;
      margin-bottom: 1.5rem; /* Spacing below the title */
    }
    .welcome-page .intro {
      font-size: 1rem;
      /* Match Connected Revenue styling: light grey text */
      color: #A0A7BD;
      margin-bottom: 1rem;
      /* Always render the introductory tagline in uppercase */
      text-transform: uppercase;
    }
    .welcome-page h1, .welcome-page .intro {
      text-align: left;
    }
    .welcome-page .instructions {
      text-align: left;
    }
    .instructions p {
      margin-bottom: 0.75rem;
      color: #555;
    }
    .instructions ul {
      /* remove default bullets and prepare for custom check icons */
      list-style: none;
      margin-bottom: 0.75rem;
      padding-left: 0;
    }
    .instructions li {
      position: relative;
      margin-bottom: 0.5rem;
      /* provide left padding so the check icon doesn't overlap the text */
      padding-left: 2rem;
    }
    /* Custom checkmark bullets for instructions list */
    .instructions li::before {
      content: "";
      position: absolute;
      left: 0;
      /* vertically align the icon with the text */
      top: 0.1rem;
      width: 1.2rem;
      height: 1.2rem;
      border-radius: 50%;
      /* Updated to green check color */
      border: 1px solid #6FCF97;
      background-image: url("data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2040%2040%22%3E%3Cpath%20d%3D%22M37.9%2C10.6l-3.2-3.2c-0.4-0.4-1-0.7-1.6-0.7c-0.6%2C0-1.2%2C0.2-1.6%2C0.7L15.9%2C23l-7-7c-0.4-0.4-1-0.7-1.6-0.7S6.1%2C15.6%2C5.6%2C16%20l-3.2%2C3.2c-0.4%2C0.4-0.7%2C1-0.7%2C1.6S2%2C22%2C2.4%2C22.5l8.6%2C8.6l3.2%2C3.2c0.4%2C0.4%2C1%2C0.7%2C1.6%2C0.7c0.6%2C0%2C1.2-0.2%2C1.6-0.7l3.2-3.2l17.2-17.2%20c0.4-0.4%2C0.7-1%2C0.7-1.6C38.6%2C11.6%2C38.4%2C11.1%2C37.9%2C10.6z%22%20fill%3D%22%236FCF97%22%20%2F%3E%3C%2Fsvg%3E");
      background-repeat: no-repeat;
      background-position: center;
      background-size: 55%;
    }
    .button-wrapper.center {
      justify-content: center;
      margin-top: 30px;
    }

    /* Progress bar styling */
    .progress-bar {
      width: 100%;
      height: 8px;
      background: #f3eefc;
      border-radius: 4px;
      margin-bottom: 1.5rem;
      overflow: hidden;
    }
    .progress-bar .progress {
      height: 100%;
      width: 0;
      background: #CFBBF0;
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    /* Secondary button styling for Back */
    .button-wrapper button.secondary {
      background: #ffffff;
      border: 2px solid #9333EA;
      color: #9333EA;
      border-radius: 10px;
      transition: border-color 0.2s ease, color 0.2s ease;
    }
    .button-wrapper button.secondary:hover {
      border-color: #5D1E96;
      color: #5D1E96;
    }
    .question h2 {
      /* Style question headers to match Connected Revenue's Poppins styling */
      text-transform: uppercase;
      color: #5D1E96;
      font-family: 'Poppins', sans-serif;
      letter-spacing: 0.05rem;
      width: calc(100% + 0.05rem);
      font-size: 1em;
      line-height: 1.375;
      font-weight: 500;
      margin-bottom: 0.75rem;
    }
    /* Style for question paragraphs */
    .question p {
      text-align: left;
      color: #4B4F66;
      font-family: 'DM Sans', sans-serif;
      font-size: 1em;
      line-height: 1.375;
      font-weight: 400;
    }
    /* Style for option text */
    .option span {
      color: #4B4F66;
      font-family: 'DM Sans', sans-serif;
      font-size: 1em;
      line-height: 1.375;
      font-weight: 400;
    }
    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .option {
      display: flex;
      align-items: center;
      background: #f7f8fc;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s;
      position: relative;
      /* left padding to accommodate custom icons */
      padding-left: 2.5rem;
    }

    /* Default padding for options without custom icons */
    .option:not(.icon-check):not(.icon-cross):not(.icon-warning) {
      padding-left: 2rem;
    }
    .option input[type="radio"] {
      /* Hide default radio appearance while retaining accessibility */
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }
    .option:hover {
      background: #eceff9;
    }

    /* Highlight selected option */
    .option.selected {
      background: #ece9fb;
    }

    /* Custom icons for yes/no options */
    .option.icon-check::before,
    .option.icon-cross::before {
      content: "";
      position: absolute;
      left: 0.5rem;
      top: 50%;
      transform: translateY(-50%);
      width: 1.2rem;
      height: 1.2rem;
      border-radius: 50%;
      /* Border color will be set individually for each icon type */
      border: 1px solid transparent;
      background-repeat: no-repeat;
      background-position: center;
      background-size: 55%;
    }
    .option.icon-check::before {
      background-image: url("data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2040%2040%22%3E%3Cpath%20d%3D%22M37.9%2C10.6l-3.2-3.2c-0.4-0.4-1-0.7-1.6-0.7c-0.6%2C0-1.2%2C0.2-1.6%2C0.7L15.9%2C23l-7-7c-0.4-0.4-1-0.7-1.6-0.7S6.1%2C15.6%2C5.6%2C16%20l-3.2%2C3.2c-0.4%2C0.4-0.7%2C1-0.7%2C1.6S2%2C22%2C2.4%2C22.5l8.6%2C8.6l3.2%2C3.2c0.4%2C0.4%2C1%2C0.7%2C1.6%2C0.7c0.6%2C0%2C1.2-0.2%2C1.6-0.7l3.2-3.2l17.2-17.2%20c0.4-0.4%2C0.7-1%2C0.7-1.6C38.6%2C11.6%2C38.4%2C11.1%2C37.9%2C10.6z%22%20fill%3D%22%236FCF97%22%20%2F%3E%3C%2Fsvg%3E");
      /* Match the border color to the green check icon */
      border: 1px solid #6FCF97;
    }
    .option.icon-cross::before {
      background-image: url("data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2040%2040%22%3E%3Cpath%20d%3D%22M34%2C11.7c0-0.6-0.2-1.2-0.7-1.6l-3.2-3.2c-0.4-0.4-1-0.7-1.6-0.7s-1.2%2C0.2-1.6%2C0.7L20%2C13.8l-6.9-6.9c-0.4-0.4-1-0.7-1.6-0.7%20c-0.6%2C0-1.2%2C0.2-1.6%2C0.7l-3.2%2C3.2c-0.4%2C0.4-0.7%2C1-0.7%2C1.6c0%2C0.6%2C0.2%2C1.2%2C0.7%2C1.6l6.9%2C6.9l-6.9%2C6.9c-0.4%2C0.4-0.7%2C1-0.7%2C1.6%20s0.2%2C1.2%2C0.7%2C1.6l3.2%2C3.2c0.4%2C0.4%2C1%2C0.7%2C1.6%2C0.7c0.6%2C0%2C1.2-0.2%2C1.6-0.7l6.9-6.9l6.9%2C6.9c0.4%2C0.4%2C1%2C0.7%2C1.6%2C0.7s1.2-0.2%2C1.6-0.7%20l3.2-3.2c0.4-0.4%2C0.7-1%2C0.7-1.6s-0.2-1.2-0.7-1.6l-6.9-6.9l6.9-6.9C33.8%2C12.9%2C34%2C12.3%2C34%2C11.7z%22%20fill%3D%22%23F26E6E%22%20%2F%3E%3C%2Fsvg%3E");
      /* Match the border color to the red cross icon */
      border: 1px solid #F26E6E;
    }

    /* Warning icon for 'Sort of' options */
    .option.icon-warning::before {
      content: "";
      position: absolute;
      left: 0.5rem;
      top: 50%;
      transform: translateY(-50%);
      width: 1.2rem;
      height: 1.2rem;
      border-radius: 50%;
      /* Use a CSS border for the circle, just like the other icons */
      border: 1px solid #F5A623; 
      /* Use the new, thicker exclamation mark SVG (without a built-in circle) */
      background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%2040%2040%27%3E%3Cpath%20d%3D%27M16%208h8v18h-8z%20M16%2030h8v8h-8z%27%20fill%3D%27%23F5A623%27%2F%3E%3C%2Fsvg%3E");
      background-repeat: no-repeat;
      background-position: center;
      /* Use a consistent background-size to match the others */
      background-size: 55%; 
    }
    .button-wrapper {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    #quiz-section .button-wrapper.single-button {
      justify-content: flex-end;
    }
    button {
      background: #9333EA; /* default purple */
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    button:hover {
      background: #5D1E96; /* darker on hover */
    }
    .hidden {
      display: none;
    }
    .result-section {
      display: none;
      margin-top: 0px;
    }
    .result-section h2 {
      text-align: center;
      color: #5D1E96;
      font-family: 'DM Sans', sans-serif;
      font-size: 1.375em;
      line-height: 1.125;
      font-weight: 700;
      margin-bottom: 1.5rem;
    }
    .result-section p.score {
      /* Emphasise the numeric score: use the same light grey as question headers */
      font-size: 1.2rem;
      margin-bottom: 1rem;
      color: #A0A7BD;
      /* Display the score text in uppercase for consistency */
      text-transform: uppercase;
    }
    .result-section .cta {
      margin-top: 20px;
    }
    .cta a {
      text-decoration: none;
      background: #9333EA;
      color: #fff;
      padding: 10px 20px;
      border-radius: 10px;
      font-weight: 600;
      /* Ensure CTA occupies full width so it aligns with the download button */
      display: block;
      width: 50%;
      text-align: center;
      margin: 0 auto;
    }
    .cta a:hover {
      background: #5D1E96;
    }
    .email-capture {
      margin-top: 30px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .email-capture label {
      display: block;
      margin-bottom: 8px;
      /* Remove default bold styling so only the specified line is bold via <strong> */
      font-weight: normal;
    }
    /* Style for the results download section */
    .email-capture button {
      margin-top: 10px;
      /* Match the secondary/back button styling: white background with purple border */
      background: #ffffff;
      border: 2px solid #9333EA;
      color: #9333EA;
      border-radius: 10px;
      padding: 10px 20px;
      font-weight: 500;
      /* Ensure the download button spans the full width like the CTA */
      width: 50%;
      text-align: center;
      transition: border-color 0.2s ease, color 0.2s ease;
    }
    .email-capture button:hover {
      border-color: #5D1E96;
      color: #5D1E96;
    }

    /* Custom styling for the Start button on the welcome page */
    .start-button {
      background-color: #9333EA;
      color: #ffffff;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      border-radius: 10px;
      font-weight: 500;
      width: 40%;
    }
    .start-button:hover {
      background-color: #5D1E96;
    }
    /* Icon inside buttons */
    .btn-icon {
      width: 1.1rem;
      height: 1.1rem;
    }
    .footer-note {
      margin-top: 15px;
      font-size: 0.9rem;
      color: #777;
    }
    /* Custom Alert Modal Styling */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none; /* Initially hidden */
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-content {
      background: #fff;
      padding: 20px 30px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      text-align: center;
      max-width: 90%;
      width: 400px;
    }
    .modal-content p {
      margin-bottom: 20px;
      color: #4B4F66;
      font-size: 1rem;
    }
    .modal-content button {
      background: #9333EA;
      color: #fff;
      border: none;
      padding: 10px 30px;
      border-radius: 10px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s;
    }
    .modal-content button:hover {
      background: #5D1E96;
    }
    
    /* Mobile Styles */
    @media (max-width: 768px) {
      .cta a,
      .email-capture button,
      .start-button {
        width: 100%;
      }
      #quiz-section .button-wrapper {
        display: flex;
        gap: 10px;
      }
      #quiz-section .button-wrapper button {
        flex-basis: 0;
        flex-grow: 1;
      }
    }
  </style>
</head>
<body>
  <div class="scorecard" id="scorecard">
    <!-- Welcome Page -->
    <div id="welcome-page" class="welcome-page">
      <h2 class="assessment-title">Take The Assessment</h2>
      <div class="instructions">
      <p>You don‚Äôt need another advisor telling you to ‚Äúget to PMF.‚Äù You need to know if you‚Äôre there ‚Äî or chasing the wrong signals.</p>
        <p>This 2‚Äëminute scorecard helps you diagnose:</p>
        <ul>
          <li>If your retention is real</li>
          <li>If your messaging lands</li>
          <li>If your growth signals actually matter</li>
        </ul>
        <p>No theory. No fluff. Just a score, a benchmark, and what to do next.</p>
      </div>
      <div class="button-wrapper center">
        <button id="start-btn" class="start-button">
          <!-- Inline SVG icon for right chevron -->
          <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
            <polyline points="8 5 16 12 8 19"></polyline>
          </svg>
          <span>Start</span>
        </button>
      </div>
    </div>

    <!-- Question & Progress Container (hidden initially) -->
    <div id="quiz-section" class="hidden">
      <!-- Progress Bar -->
      <div class="progress-bar"><div class="progress" id="progress" style="width: 0%;"></div></div>
      <!-- Question container, dynamically updated -->
      <div id="question-container"></div>
      <!-- Navigation buttons -->
      <div class="button-wrapper">
        <button id="back-btn" class="secondary">Back</button>
        <button id="next-btn">Next</button>
      </div>
    </div>

    <!-- Result Section -->
    <div class="result-section" id="result-section">
      <h2 id="result-title"></h2>
      <p class="score" id="score-summary"></p>
      <p id="result-message"></p>
      <div class="cta" id="cta-button"></div>
      <!-- Results download section -->
      <div class="email-capture" id="email-capture">
        <!-- The label text will be set dynamically based on the score range -->
        <label id="email-label"></label>
        <!-- Button to download the results instead of collecting an email address -->
        <button id="download-btn">Download Results</button>
      </div>
    </div>
  </div>

  <!-- Custom Alert Modal -->
  <div id="custom-alert" class="modal-overlay">
    <div class="modal-content">
      <p id="alert-message">Please select an answer before continuing.</p>
      <button id="alert-close-btn">OK</button>
    </div>
  </div>

  <script>
    // This event listener ensures the script runs only after the entire HTML document has been loaded and parsed.
    document.addEventListener('DOMContentLoaded', function() {
      // Data model for the scorecard
      const questions = [
        {
          id: 'q1',
          title: 'Retention & Usage',
          question: 'Have you had at least 5+ customers renew, refer, or expand usage?',
          options: [
            { label: '‚úÖ Yes', value: 1 },
            { label: '‚ö†Ô∏è Sort of (we‚Äôre seeing interest but no growth yet)', value: 0.5 },
            { label: '‚ùå No', value: 0 }
          ]
        },
        {
          id: 'q2',
          title: 'Product Stickiness',
          question: 'If you surveyed your users, what % would say they\'d be ‚Äúvery disappointed‚Äù if your product disappeared?',
          options: [
            { label: '‚úÖ Over 40%', value: 1 },
            { label: '‚ö†Ô∏è 20‚Äì39%', value: 0.5 },
            { label: '‚ùå Under 20% or haven\'t surveyed', value: 0 }
          ]
        },
        {
          id: 'q3',
          title: 'Organic Demand Signals',
          question: 'Are you seeing any warm, unsolicited demand (referrals, organic signups, or inbound leads)?',
          options: [
            { label: '‚úÖ Yes ‚Äî we\'re getting it regularly', value: 1 },
            { label: '‚ö†Ô∏è Some, but not consistently', value: 0.5 },
            { label: '‚ùå No ‚Äî everything is cold outbound or paid', value: 0 }
          ]
        },
        {
          id: 'q4',
          title: 'ICP Fit & Conversion',
          question: 'Are you consistently converting one clear type of customer?',
          options: [
            { label: '‚úÖ Yes ‚Äî we have a defined ICP that converts', value: 1 },
            { label: '‚ö†Ô∏è Not quite ‚Äî customers feel scattered', value: 0.5 },
            { label: '‚ùå No ‚Äî still experimenting with who to sell to', value: 0 }
          ]
        },
        {
          id: 'q5',
          title: 'Internal Clarity',
          question: 'Can everyone on your team clearly explain what core problem your product solves ‚Äî in one sentence?',
          options: [
            { label: '‚úÖ Yes', value: 1 },
            { label: '‚ö†Ô∏è Kind of ‚Äî depends who you ask', value: 0.5 },
            { label: '‚ùå No', value: 0 }
          ]
        }
      ];

      let currentQuestionIndex = 0;
      let answers = {};

      // DOM references
      const welcomePage = document.getElementById('welcome-page');
      const startBtn = document.getElementById('start-btn');
      const quizSection = document.getElementById('quiz-section');
      const questionContainer = document.getElementById('question-container');
      const progressBar = document.getElementById('progress');
      const backBtn = document.getElementById('back-btn');
      const nextBtn = document.getElementById('next-btn');
      const resultSection = document.getElementById('result-section');
      const resultTitle = document.getElementById('result-title');
      const resultMessage = document.getElementById('result-message');
      const scoreSummary = document.getElementById('score-summary');
      const ctaButton = document.getElementById('cta-button');
      const emailCapture = document.getElementById('email-capture');
      const emailLabel = document.getElementById('email-label');
      const downloadBtn = document.getElementById('download-btn');
      const customAlert = document.getElementById('custom-alert');
      const alertCloseBtn = document.getElementById('alert-close-btn');

      // Render a specific question by its index
      function renderQuestion(index) {
        const q = questions[index];
        if (!q) return;
        questionContainer.innerHTML = '';
        const questionDiv = document.createElement('div');
        questionDiv.classList.add('question');
        const title = document.createElement('h2');
        title.textContent = q.title;
        const questionText = document.createElement('p');
        questionText.textContent = q.question;

        const optionsContainer = document.createElement('div');
        optionsContainer.classList.add('options');
        q.options.forEach((opt) => {
          const optionDiv = document.createElement('label');
          optionDiv.classList.add('option');
          const radio = document.createElement('input');
          radio.type = 'radio';
          radio.name = q.id;
          radio.value = opt.value;
          radio.dataset.label = opt.label;
          
          if (answers[q.id] && answers[q.id].value === opt.value) {
            radio.checked = true;
          }
          
          optionDiv.appendChild(radio);
          const span = document.createElement('span');
          
          let labelText = opt.label;
          if (labelText.trim().startsWith('‚úÖ')) {
            optionDiv.classList.add('icon-check');
            labelText = labelText.replace(/^‚úÖ\s*/, '');
          } else if (labelText.trim().startsWith('‚ùå')) {
            optionDiv.classList.add('icon-cross');
            labelText = labelText.replace(/^‚ùå\s*/, '');
          } else if (labelText.trim().startsWith('‚ö†Ô∏è')) {
            optionDiv.classList.add('icon-warning');
            labelText = labelText.replace(/^‚ö†Ô∏è\s*/, '');
          }
          span.textContent = labelText;
          optionDiv.appendChild(span);
          
          if (radio.checked) {
            optionDiv.classList.add('selected');
          }
          
          optionDiv.addEventListener('click', function(event) {
            event.preventDefault();
            const optionLabels = optionsContainer.querySelectorAll('.option');
            optionLabels.forEach(lbl => lbl.classList.remove('selected'));
            radio.checked = true;
            optionDiv.classList.add('selected');
          });
          optionsContainer.appendChild(optionDiv);
        });

        questionDiv.appendChild(title);
        questionDiv.appendChild(questionText);
        questionDiv.appendChild(document.createElement('br'));
        questionDiv.appendChild(optionsContainer);
        questionContainer.appendChild(questionDiv);

        const buttonWrapper = quizSection.querySelector('.button-wrapper');
        if (index === 0) {
          backBtn.style.display = 'none';
          buttonWrapper.classList.add('single-button');
        } else {
          backBtn.style.display = 'inline-flex';
          buttonWrapper.classList.remove('single-button');
        }
        
        if (index === questions.length - 1) {
          nextBtn.innerHTML = `<svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><polyline points="5 13 9 17 19 7"></polyline></svg><span>See Results</span>`;
        } else {
          nextBtn.innerHTML = 'Next';
        }
        
        const progressPercent = (index / questions.length) * 100;
        progressBar.style.width = progressPercent + '%';
      }

      // Validate if an option is selected
      function validateAnswer() {
        const currentQ = questions[currentQuestionIndex];
        return document.querySelector(`input[name="${currentQ.id}"]:checked`);
      }

      // Compute result message and CTA based on score
      function computeResults(totalScore) {
        let title, message, ctaText, ctaLink, tagline;
        if (totalScore >= 4.0) {
          title = 'üü¢ Strong PMF Signals';
          message = 'Your product is resonating. You\'re seeing strong retention, clear ICP alignment, and true demand. Now it\'s about disciplined, intentional growth.';
          tagline = 'You‚Äôve Hit PMF. Time to Scale With Precision.';
          ctaText = 'Plan Your Scaling Strategy';
          ctaLink = 'https://contact.connectedrevenue.ai/#schedule';
        } else if (totalScore >= 2.0) {
          title = 'üü° Partial PMF';
          tagline = 'You‚Äôre Close, But PMF Isn‚Äôt Quite Locked.';
          message = 'You‚Äôve found initial traction, but gaps in ICP clarity, retention, or messaging are slowing you down. PMF is within reach‚Äîyou just need to tighten the fit.';
          ctaText = 'Schedule a PMF Review Session';
          ctaLink = 'https://contact.connectedrevenue.ai/#schedule';
        } else {
          title = 'üî¥ Pre-PMF Warning';
          tagline = 'Don‚Äôt Scale Yet, Product-Market Fit Is Missing.';
          message = 'You may be targeting the wrong audience or misreading signals. Scaling now risks wasted time and spend. Let‚Äôs realign and get you on track.';
          ctaText = 'Book a Free Diagnostic Call';
          ctaLink = 'https://contact.connectedrevenue.ai/#schedule';
        }
        return { title, message, ctaText, ctaLink, tagline };
      }

      // Display the final results
      function showResults() {
        quizSection.style.display = 'none';

        let totalScore = Object.values(answers).reduce((sum, ans) => sum + ans.value, 0);
        
        const results = computeResults(totalScore);
        resultTitle.textContent = results.title;

        const existingTag = document.getElementById('result-tagline');
        if (existingTag) existingTag.remove();

        if (results.tagline) {
          const taglineEl = document.createElement('p');
          taglineEl.id = 'result-tagline';
          taglineEl.textContent = results.tagline;
          taglineEl.style.marginTop = '0.25rem';
          taglineEl.style.fontWeight = '500';
          taglineEl.style.color = '#4B4F66';
          scoreSummary.insertAdjacentElement('afterend', taglineEl);
        }
        
        resultMessage.textContent = results.message;
        scoreSummary.textContent = `Score: ${totalScore.toFixed(1)} / 5`;
        ctaButton.innerHTML = `<a href="${results.ctaLink}" target="_blank">${results.ctaText}</a>`;
        
        if (results.title === 'üü¢ Strong PMF Signals') {
          emailLabel.textContent = 'Download your results to align your team and investors‚Äîand let‚Äôs build your GTM together.';
        } else if (results.title === 'üü° Partial PMF') {
          emailLabel.textContent = 'Let‚Äôs uncover what‚Äôs working, fix what‚Äôs not, and convert sparks into sustainable momentum.';
        } else {
          emailLabel.textContent = 'We‚Äôll help identify blind spots, validate assumptions, and create a clearer path to traction.';
        }
        
        resultSection.style.display = 'block';
      }

      // Event Listeners
      if (startBtn) {
        startBtn.addEventListener('click', function() {
          welcomePage.style.display = 'none';
          quizSection.classList.remove('hidden');
          currentQuestionIndex = 0;
          answers = {};
          renderQuestion(currentQuestionIndex);
        });
      }

      nextBtn.addEventListener('click', function() {
        const selected = validateAnswer();
        if (!selected) {
          customAlert.style.display = 'flex';
          return;
        }
        
        const currentQ = questions[currentQuestionIndex];
        answers[currentQ.id] = {
          label: selected.dataset.label,
          value: parseFloat(selected.value)
        };

        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
          renderQuestion(currentQuestionIndex);
        } else {
          showResults();
        }
      });

      backBtn.addEventListener('click', function() {
        if (currentQuestionIndex > 0) {
          currentQuestionIndex--;
          renderQuestion(currentQuestionIndex);
        }
      });

      downloadBtn.addEventListener('click', function() {
        const lines = ['PMF Readiness Scorecard Results', ''];
        let totalScoreForFile = 0;

        questions.forEach(q => {
          if(answers[q.id]) {
            lines.push(`${q.title}: ${answers[q.id].label} (Score: ${answers[q.id].value})`);
            totalScoreForFile += answers[q.id].value;
          }
        });

        lines.push('', `Total PMF Score: ${totalScoreForFile.toFixed(1)} / 5`);
        
        const resultsData = computeResults(totalScoreForFile);
        lines.push(`Result: ${resultsData.title}`);
        lines.push(resultsData.message, `Next Step: ${resultsData.ctaText}`);
        
        const blob = new Blob([lines.join('\n')], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'pmf-score.txt';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      });
      
      alertCloseBtn.addEventListener('click', function() {
        customAlert.style.display = 'none';
      });

      // Also close the modal if the user clicks on the overlay
      customAlert.addEventListener('click', function(event) {
        if (event.target === customAlert) {
          customAlert.style.display = 'none';
        }
      });

      // Initial render is handled by the start button click
    });
  </script>
</body>
</html>
